<!DOCTYPE html>
<html lang="zh-tw">

<head>
    
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
<meta name="HandheldFriendly" content="True" />
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
<meta name="generator" content="Hugo 0.94.1" />


<link rel="apple-touch-icon" sizes="180x180" href="/siteimage/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/siteimage/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/siteimage/favicon-16x16.png">
<link rel="manifest" href="/siteimage/manifest.json">
<link rel="mask-icon" href="/siteimage/safari-pinned-tab.svg" color="#5bbad5">


<title>【筆記】如何讓遊戲支援模組開發 - AngusChan&#39;s Devlog</title>


<meta name="author" content="AngusChan" />


<meta name="description" content="這次將解釋遊戲模組的運作原理，以及如何在 Unity 中使用 IO、XML 與 Lua 進行實做。" />


<meta name="keywords" content="game-develop, programming, data-driven, modification" />


<meta property="og:title" content="【筆記】如何讓遊戲支援模組開發" />
<meta name="twitter:title" content="【筆記】如何讓遊戲支援模組開發" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://angus945.github.io/learn/game-development/how-to-make-modification-games/" />

<meta property="og:description" content="這次將解釋遊戲模組的運作原理，以及如何在 Unity 中使用 IO、XML 與 Lua 進行實做。" />
<meta name="twitter:description" content="這次將解釋遊戲模組的運作原理，以及如何在 Unity 中使用 IO、XML 與 Lua 進行實做。" /><meta property="og:image" content="https://angus945.github.io/siteImage/head.png" />
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:image" content="https://angus945.github.io/siteImage/head.png" /><meta property="article:published_time" content="2023-01-12T00:00:00+00:00" /><meta property="article:modified_time" content="2023-01-12T00:00:00+00:00" />


<style>
    @media (prefers-color-scheme: dark) {
        body[data-theme='auto'] img {
            filter: brightness(60%);
        }
    }

    body[data-theme='dark'] img {
        filter: brightness(60%);
    }
</style>




<link rel="stylesheet" href="https://angus945.github.io/assets/css/fuji.min.css" />







<script async src="https://www.googletagmanager.com/gtag/js?id=G-LTVT6WYDT4"></script>
<script>
    window.dataLayer = window.dataLayer || [];

    function gtag() {
        dataLayer.push(arguments);
    }
    gtag('js', new Date());
    gtag('config', 'G-LTVT6WYDT4');
</script>





<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>





<link rel="stylesheet" href="https://angus945.github.io/global-scrollbar.5b598faf3be22e0dd92d4c8d17451723ee2e6bb2a7d402d526e30ad977125fdb.css" integrity="sha256-W1mPrzviLg3ZLUyNF0UXI&#43;4ua7Kn1ALVJuMK2XcSX9s=">






<link rel="stylesheet" href="https://angus945.github.io/content-style.73e84ce876a003ab9119845f2f03a0c36a0c7160033ab908600bdb089b9025da.css" integrity="sha256-c&#43;hM6HagA6uRGYRfLwOgw2oMcWADOrkIYAvbCJuQJdo=">





<link rel="stylesheet" href="https://angus945.github.io/content-tag.88756549e6e6c3d88b7fe0e9f73df668c448d08d4f0ced88126af94516fdaf7d.css" integrity="sha256-iHVlSebmw9iLf&#43;Dp9z32aMRI0I1PDO2IEmr5RRb9r30=">






<link rel="stylesheet" href="https://angus945.github.io/social-share.942723de90946d27c102e4e23009a70dd1380025a21f650fad0a6113042cf7f6.css" integrity="sha256-lCcj3pCUbSfBAuTiMAmnDdE4ACWiH2UPrQphEwQs9/Y=">






<link rel="stylesheet" href="https://angus945.github.io/background.85f26e98f67c0d63b7931521fd4cd0bd43948cf81e0fec42e9d083b7edc6d401.css" integrity="sha256-hfJumPZ8DWO3kxUh/UzQvUOUjPgeD&#43;xC6dCDt&#43;3G1AE=">









<link rel="stylesheet" href="https://angus945.github.io/shader-container.619133730b593e40a34b42fbe400df7189d620002eadf2e4b5ce3e4e8d9b8f1d.css" integrity="sha256-YZEzcwtZPkCjS0L75ADfcYnWIAAurfLktc4&#43;To2bjx0=">



<script type="text/javascript" src="https://rawgit.com/patriciogonzalezvivo/glslCanvas/master/dist/GlslCanvas.js"></script>







<script type="text/javascript">

    
    window.addEventListener('load', function()
    {
        var containers = document.getElementsByClassName("shader-container");
        
        for(var i = 0; i < containers.length; i++)
        {
            loadShader(containers[i]);
        }
    });
    function loadShader(container)
    {
        var input = container.getElementsByClassName("shader-input")[0];
        
        if(input == null) return;
        
        var canvas = container.getElementsByTagName("canvas")[0];
        var sandbox = new GlslCanvas(canvas);

        var fields = container.getElementsByClassName("shader-input-field");

        
        
            var datas = JSON.parse(input.dataset.inputs);

            for(var i = 0; i < fields.length; i ++)
            {
                setInput(sandbox, fields[i], datas[i]);
            }
        
        
        
        
        

    };
    function setInput(sandbox, field, data)
    {
        switch(data.type)
        {
            case "int":
                rangeField(sandbox, field, data, 0);
                break;
                
            case "float":
                rangeField(sandbox, field, data, 2);
                break;
                
            case "vector":
                vectorField(sandbox, field, data);
                break;
        }
    }
    function rangeField(sandbox, field, data, fixed)
    {
        var value = field.querySelector("#value");
        var slider = field.getElementsByTagName("input")[0];

        slider.addEventListener('input', (event) => {
            var input = parseFloat(slider.value);

            sandbox.setUniform(data.name, input);
            value.innerHTML = input.toFixed(fixed);
        });

        value.innerHTML = parseFloat(slider.value).toFixed(fixed);
        sandbox.setUniform(data.name, parseFloat(slider.value));
    }

    function vectorField(sandbox, field, data)
    {            
        var value = field.querySelector("#value");
        value.innerHTML = data.default;
        
        var picker = field.getElementsByTagName("canvas")[0];
        picker.width = picker.clientWidth;
        picker.height = picker.clientHeight;
        picker.style.display = "none";

        var context = picker.getContext('2d');

        var minX = parseFloat(data.min.x);
        var maxX = parseFloat(data.max.x);
        var minY = parseFloat(data.min.y);
        var maxY = parseFloat(data.max.y);

        var popup = false;
        var mouseDown = false;
        
        value.addEventListener('click', (event) => {
            popup = !popup;
            picker.style.display = popup ? "block" : "none";
        });
        picker.addEventListener('mousedown', (event) => {
            mouseDown = true;

            pickPosition(event);
        });
        picker.addEventListener('mousemove', (event) => {

            if(!mouseDown) return;

            pickPosition(event);                
        });
        picker.addEventListener('mouseup', (event) => {
            mouseDown = false;
        });
                    
        function pickPosition(event)
        {
            var rect = picker.getBoundingClientRect();
            var clickX = event.pageX - picker.offsetLeft;
            var clickY = event.clientY - rect.top;
            
            var uvX = (clickX) / rect.width;
            var uvY = 1 - (clickY) / rect.height;

            var x = minX + (maxX - minX) * uvX;
            var y = minY + (maxY - minY) * uvY;

            drawPoint(picker, context, clickX, clickY, 'red', 5);
            value.innerHTML = `(${ x.toFixed(2) }, ${ y.toFixed(2) })`;
            
            sandbox.setUniform(data.name, x, y);              
        }
        function drawPoint(canvas, context, x, y, color, radius) 
        {
            context.clearRect(0, 0, canvas.width, canvas.height);

            context.fillStyle = "red"; 
            
            context.beginPath();
            context.arc(x, y, radius, 0, 2 * Math.PI, true);
            context.fill();
        }
    }
</script>

          
 





    
    
    
        
        
    
    
    

    
        
     

    
    
    
        
        
    
    
    

    
        
     

    
    
    
        
        
    
    
    

    
        
     





<script src="https://threejs.org/build/three.min.js"></script>
<script type="text/javascript">
    
    var seed = Math.random();
    var backgroundData = randomBackground("[{\u0022dark_image\u0022:\u0022\/background\/watercolor-black.jpg\u0022,\u0022dark_opacity\u0022:0.2,\u0022fps\u0022:5,\u0022frag\u0022:\u0022#ifdef GL_ES\\r\\nprecision mediump float;\\r\\n#endif\\r\\n\\r\\nuniform vec2 u_resolution;\\r\\nuniform vec2 u_mouse;\\r\\nuniform float u_time;\\r\\n\\r\\nuniform float u_seed;\\r\\nuniform float u_theme;\\r\\n\\r\\nvoid randomColor(float seed, out vec3 colorA, vec3 colorB)\\r\\n{\\r\\n    colorA = fract(vec3(seed * 1.0, seed * 10.0, seed * 100.0));\\r\\n    colorB = fract(vec3(seed * 1000.0, seed * 10000.0, seed * 100000.0));\\r\\n}\\r\\n\\r\\nvoid main() \\r\\n{\\r\\n    vec2 st = gl_FragCoord.xy \/ u_resolution.xy;\\r\\n    \/\/ vec2 mouse = u_mouse \/ u_resolution;\\r\\n\\r\\n    vec3 colorA, colorB;\\r\\n    randomColor(u_seed, colorA, colorB);\\r\\n    \\r\\n    vec3 color = mix(colorA, colorB, dot(st, colorA.xy));\\r\\n    color.r \u002b= sin(u_time * \u002b5.0 \u002b u_seed * 46.451) * 0.10;\\r\\n    color.g \u002b= cos(u_time * -3.0 - u_seed * 13.151) * 0.20;\\r\\n    color.b \u002b= sin(u_time * \u002b1.0 \u002b u_seed * 97.654) * 0.15;\\r\\n        \\r\\n    vec4 darkColor = vec4(color * 0.5, 0);\\r\\n    vec4 lightColor = vec4(color * 0.3, 0.1);\\r\\n    gl_FragColor = mix(darkColor, lightColor, u_theme);\\r\\n}\u0022,\u0022light_image\u0022:\u0022\/background\/watercolor-white.jpg\u0022,\u0022light_opacity\u0022:0.25,\u0022name\u0022:\u0022watercolor-a\u0022,\u0022speed\u0022:0.01,\u0022style\u0022:\u0022background image-basis\u0022,\u0022vert\u0022:\u0022void main() {\\r\\n    gl_Position = vec4( position, 1.0 );\\r\\n}\u0022},{\u0022dark_image\u0022:\u0022\/background\/watercolor-darkblue.jpg\u0022,\u0022dark_opacity\u0022:0.2,\u0022fps\u0022:5,\u0022frag\u0022:\u0022#ifdef GL_ES\\r\\nprecision mediump float;\\r\\n#endif\\r\\n\\r\\nuniform vec2 u_resolution;\\r\\nuniform vec2 u_mouse;\\r\\nuniform float u_time;\\r\\n\\r\\nuniform float u_seed;\\r\\nuniform float u_theme;\\r\\n\\r\\nvoid randomColor(float seed, out vec3 colorA, vec3 colorB)\\r\\n{\\r\\n    colorA = fract(vec3(seed * 1.0, seed * 10.0, seed * 100.0));\\r\\n    colorB = fract(vec3(seed * 1000.0, seed * 10000.0, seed * 100000.0));\\r\\n}\\r\\n\\r\\nvoid main() \\r\\n{\\r\\n    vec2 st = gl_FragCoord.xy \/ u_resolution.xy;\\r\\n    \/\/ vec2 mouse = u_mouse \/ u_resolution;\\r\\n\\r\\n    vec3 colorA, colorB;\\r\\n    randomColor(u_seed, colorA, colorB);\\r\\n    \\r\\n    vec3 color = mix(colorA, colorB, dot(st, colorA.xy));\\r\\n    color.r \u002b= sin(u_time * \u002b5.0 \u002b u_seed * 46.451) * 0.10;\\r\\n    color.g \u002b= cos(u_time * -3.0 - u_seed * 13.151) * 0.20;\\r\\n    color.b \u002b= sin(u_time * \u002b1.0 \u002b u_seed * 97.654) * 0.15;\\r\\n        \\r\\n    vec4 darkColor = vec4(color * 0.5, 0);\\r\\n    vec4 lightColor = vec4(color * 0.3, 0.1);\\r\\n    gl_FragColor = mix(darkColor, lightColor, u_theme);\\r\\n}\u0022,\u0022light_image\u0022:\u0022\/background\/watercolor-lightblue.jpg\u0022,\u0022light_opacity\u0022:0.25,\u0022name\u0022:\u0022watercolor-b\u0022,\u0022speed\u0022:0.01,\u0022style\u0022:\u0022background image-basis\u0022,\u0022vert\u0022:\u0022void main() {\\r\\n    gl_Position = vec4( position, 1.0 );\\r\\n}\u0022},{\u0022dark_image\u0022:\u0022\/background\/watercolor-deepblue.jpg\u0022,\u0022dark_opacity\u0022:0.2,\u0022fps\u0022:5,\u0022frag\u0022:\u0022#ifdef GL_ES\\r\\nprecision mediump float;\\r\\n#endif\\r\\n\\r\\nuniform vec2 u_resolution;\\r\\nuniform vec2 u_mouse;\\r\\nuniform float u_time;\\r\\n\\r\\nuniform float u_seed;\\r\\nuniform float u_theme;\\r\\n\\r\\nvoid randomColor(float seed, out vec3 colorA, vec3 colorB)\\r\\n{\\r\\n    colorA = fract(vec3(seed * 1.0, seed * 10.0, seed * 100.0));\\r\\n    colorB = fract(vec3(seed * 1000.0, seed * 10000.0, seed * 100000.0));\\r\\n}\\r\\n\\r\\nvoid main() \\r\\n{\\r\\n    vec2 st = gl_FragCoord.xy \/ u_resolution.xy;\\r\\n    \/\/ vec2 mouse = u_mouse \/ u_resolution;\\r\\n\\r\\n    vec3 colorA, colorB;\\r\\n    randomColor(u_seed, colorA, colorB);\\r\\n    \\r\\n    vec3 color = mix(colorA, colorB, dot(st, colorA.xy));\\r\\n    color.r \u002b= sin(u_time * \u002b5.0 \u002b u_seed * 46.451) * 0.10;\\r\\n    color.g \u002b= cos(u_time * -3.0 - u_seed * 13.151) * 0.20;\\r\\n    color.b \u002b= sin(u_time * \u002b1.0 \u002b u_seed * 97.654) * 0.15;\\r\\n        \\r\\n    vec4 darkColor = vec4(color * 0.5, 0);\\r\\n    vec4 lightColor = vec4(color * 0.3, 0.1);\\r\\n    gl_FragColor = mix(darkColor, lightColor, u_theme);\\r\\n}\u0022,\u0022light_image\u0022:\u0022\/background\/watercolor-skyblue.jpg\u0022,\u0022light_opacity\u0022:0.15,\u0022name\u0022:\u0022watercolor-c\u0022,\u0022speed\u0022:0.01,\u0022style\u0022:\u0022background image-basis\u0022,\u0022vert\u0022:\u0022void main() {\\r\\n    gl_Position = vec4( position, 1.0 );\\r\\n}\u0022}]"); 

    console.log(backgroundData);
    
    function randomBackground(datas)
    {
        var backgrounds = JSON.parse(datas);
        var index = Math.floor(Math.random() * backgrounds.length);

        return backgrounds[index];        
    }

    var canvas;
    var uniforms = createUniform();
    var camera, scene, renderer, clock;
    var mouse = {x:0, y:0};

    $(document).ready(function() 
    {        
        createRenderer(backgroundData);
        createCanvas(backgroundData);

        var themeButton = document.getElementsByClassName('btn-toggle-mode')[0];
        themeButton.addEventListener('click', () => updateTheme(backgroundData));
        themeButton.addEventListener('click', () => updateInitial(backgroundData));

        setCanvas(backgroundData);
        updateTheme(backgroundData);
        updateSize();

        updateInitial(backgroundData);
        update();
    });

    
    window.addEventListener('resize', () => 
    {
        updateSize();
    });
    window.addEventListener( 'mousemove', (event) =>
    {
        updateMouse(event);
    });
    
    function createRenderer(data) 
    {
        if(data.vert == "") return;

        camera = new THREE.Camera();
        scene = new THREE.Scene(); 
        clock = new THREE.Clock();
        camera.position.z = 1;

        var geometry = new THREE.PlaneGeometry( 2, 2 );
        var material = createMaterial(uniforms, data.vert, data.frag);
        var mesh = new THREE.Mesh( geometry, material );
        scene.add( mesh );

        renderer = new THREE.WebGLRenderer();
        renderer.setPixelRatio( window.devicePixelRatio );

        canvas = renderer.domElement;
        
        function createMaterial(uniforms, vert, frag)
        {
            return new THREE.ShaderMaterial({
                uniforms: uniforms,
                vertexShader: vert,
                fragmentShader: frag,
            });
        }
    }
    function createUniform()
    {
        return {
            u_time: { type: "f", value: 1.0 },
            u_mouse: { type: "v2", value: new THREE.Vector2() },
            u_resolution: { type: "v2", value: new THREE.Vector2() },

            u_seed: { type: "f", value: seed },
            u_theme: { type: "f", value: seed },
        }
    }

    function createCanvas(data)
    {
        if(data.vert != "") return;

        canvas = document.createElement("canvas");
    }



    function setCanvas(data)
    {        
        var main = document.getElementsByTagName("main")[0]; 
        main.appendChild(canvas);

        canvas.className = data.style;
        canvas.style.top = 0;
    }
    function updateTheme(data)
    {
        var theme = document.body.dataset.theme;
    
        if(theme == "dark")
        { 
            canvas.style.opacity = data.dark_opacity;
            canvas.style.backgroundImage = `url("${ data.dark_image }")`
         
            uniforms.u_theme.value = 0.0;
        }
        else 
        {
            canvas.style.opacity = data.light_opacity;
            canvas.style.backgroundImage = `url("${ data.light_image }")`
            
            uniforms.u_theme.value = 1.0;
        }

        
    }
    function updateSize() 
    {        
        if(renderer != null)
        {
            uniforms.u_resolution.value.x = canvas.width;
            uniforms.u_resolution.value.y = canvas.height;
        }
        else
        {
            canvas.width = canvas.parentElement.clientWidth;
            canvas.height = canvas.parentElement.clientHeight + 100;
        }
    }
    function updateMouse( event )
    {         
        if(renderer == null) return;
        
        mouse.x = (event.clientX / canvas.clientWidth);
        mouse.y = 1 - (event.clientY / canvas.clientHeight);

        mouse.x = mouse.x * uniforms.u_resolution.value.x;
        mouse.y = mouse.y * uniforms.u_resolution.value.y;
        
        uniforms.u_mouse.value.x = mouse.x;
        uniforms.u_mouse.value.y = mouse.y;
    }

    let interval;
    let delta;
    let speed;
    function updateInitial(data)
    {
        interval = 1 / data.fps;
        delta = interval;
        speed = data.speed;
    }
    function update() 
    {
        window.requestAnimationFrame(update);

        delta += clock.getDelta();

        if(delta > interval)
        {
            render();

            delta = delta % interval;
        }
    }
    function render() 
    {
        if(renderer == null) return;
        
        uniforms.u_time.value += delta * speed;
        renderer.render(scene, camera);

        
        
    }
</script>




</head>

<body
  data-theme="dark"
  data-theme-auto='false'
  >
    <script data-cfasync="false">
  
  var fujiThemeData = localStorage.getItem('fuji_data-theme');
  
  if (!fujiThemeData) {
    localStorage.setItem('fuji_data-theme', 'auto');
  } else {
    
    if (fujiThemeData !== 'auto') {
      document.body.setAttribute('data-theme', fujiThemeData === 'dark' ? 'dark' : 'light');
    }
  }
</script>

    <header>
    <div class="container-lg clearfix">
        <div class="col-12 header">
            <a class="title-main" href="/">AngusChan&#39;s Devlog</a>
            
            <span class="title-sub">Stay Hungry, Stay Foolish</span>
            
        </div>
    </div>
</header>

    <main style="position: relative;">
        <div class="container-lg clearfix">
            
            <div class="col-12 col-md-9 float-left content">
                

<article>
    
        <h2 class="post-item post-title">
            <a href="https://angus945.github.io/learn/game-development/how-to-make-modification-games/">【筆記】如何讓遊戲支援模組開發</a>
        </h2>
    
    
        <div class="post-item post-meta">
            <span>
    <i class="iconfont icon-today-sharp"></i> &nbsp;
    2023-01-12
</span>




<span>
    <i class="iconfont icon-file-tray-sharp"></i>&nbsp;約 4314 字
</span>




<span><i class="iconfont icon-pricetags-sharp"></i>&nbsp;<a href="/tags/game-develop">game-develop</a>&nbsp;<a href="/tags/programming">programming</a>&nbsp;<a href="/tags/data-driven">data-driven</a>&nbsp;<a href="/tags/modification">modification</a>&nbsp;</span>

        </div>
    
       
    
    <div class="post-content markdown-body">
        
         
         
        <p>前年讀設計模式就接觸到「資料驅動」這項遊戲程式的重要知識，總算讓我排出時間好好研究了。本篇筆記的課題「遊戲模組」就是他應用之一，這次將解釋遊戲模組的運作原理，以及如何在 Unity 中使用 IO、XML 與 Lua 進行實做。</p>
<h2 id="資料驅動">資料驅動</h2>
<p>相信在遊戲領域的各位已經相當熟悉「模組」一詞了，還是直接進入正題吧，首先：</p>
<p><strong>資料驅動 Data Driven 是什麼？</strong></p>
<p>簡單來說，這是一種<h>透過「輕量的資料結構」來描述「複雜行為與邏輯」的程式設計手法</h>，透過預先規範好的格式，將字串與整數映射到對應行為的實做上，而非用程式將設計寫死，目的在於升修改彈性與降低設計門檻。</p>
<p>它除了讓我們能更有效率的開發遊戲，也間接<h>提供玩家擴展內容的手段</h>，但將細節解釋完會太花時間，所以這裡就將與模組關聯的部份整理成三大重點，提供各位深入研究的起點。</p>
<c>
註：不要和資料導向 (Data Oriented Design) 搞混了，查資料時可能會同時出現，但兩者沒有直接關係。
</c>
<h3 id="資料讀取">資料讀取</h3>
<p>通常在遊戲做完並輸出後，當中<h>使用的資源都會被引擎打包加密</h>，這也代表內容在此時被「固定」了，無法透過常規的手段修改。因此，模組運作的第一個前提就是：開發者必須提供方法&hellip;或更直白的說<h>「一個資料夾位置」，讓玩家能自由改動其中的資料。 </h></p>
<p>以 Unity 為例，我們可以透過 <code>StreamingAssets</code> 達成效果，這是一個不會在輸出後被加密的資料夾，只要遊戲運行時透過 <code>System.IO</code> 手動讀取檔案，就能使用玩家們添加的更多「遊戲內容」。</p>







<div class="image" style="width: ;" >
    <img src="/learn/game-development/how-to-make-modification-games/streaming-asset.jpg" alt="image display error, please report: [/learn/game-development/how-to-make-modification-games/streaming-asset.jpg]">
    <p style="opacity: 0.5">
        
    </p>
</div>


<p>Steam 強大的工作坊「訂閱」功能也不是什麼神奇的黑魔法，它只是幫你把模組資料「下載」到特定位置上而已，其餘的載入與解析都是遊戲自身要完成的。</p>
<c>
註：Steam 模組的預設資料夾在 C:\Program Files (x86)\Steam\steamapps\workshop\content\gameID，我實做時就從中找了不少參考研究，有興趣可以多去挖寶。
</c>
<h3 id="格式定義">格式定義</h3>
<p>有了第一項前提也不代表隨便扔的資料都能運作，我們<h>必須為模組規範好要使用的「定義檔」的格式長怎樣才行</h>。假設我們想定義一隻怪物，首先要思考他的屬性有哪些，可能包括文字資訊、行為參數與視覺的呈現方法等。</p>
<p>根據需求設計出一套能包含所有必備資料的「模板」，使用能兼具修改性與易讀性的「文字文件」作為資料格式，以 txt 檔為例：</p>
<pre><span>template.txt</span><hr style='margin-top:5px; margin-bottom:0px'>
<code class="language-txt.template">Name:
Descripe:

Health:
Speed:
Attack:

Sprite:
Sound:
</code></pre>
<p>有了模板之後，玩家只要把它修改成自己想要的樣子，再把檔案放入指定的位置就能為遊戲添加一筆新的怪物資料了。</p>
<pre><span>zombie.txt</span><hr style='margin-top:5px; margin-bottom:0px'>
<code class="language-txt.zombie">Name: Zombie
Descripe: Zombie monster !!

Health: 2
Speed: 3
Attack: 1

Sprite: sprites/zombie.png
Sound: sounds/errrrr.mp3
</code></pre>
<p>而最後，遊戲要<h>根據我們設定的格式「解析」檔案，將文字檔轉換成遊戲真正使用的物件資料 </h>。格式的複雜度取決於需求，簡單的就像範例那樣修改參數與外觀，而複雜可能允許改變邏輯與行為。</p>
<p>雖然檔案類型只要 txt 就足夠了，但還是<h>建議用其他更容易閱讀、修改與解析的格式儲存</h>，例如 XML 與 Json。</p>
<pre><span>zombie.json</span><hr style='margin-top:5px; margin-bottom:0px'>
<code class="language-json.zombie">&quot;Define&quot;: 
{
    &quot;name&quot;: &quot;Zombie&quot;,
    &quot;Descripe&quot;: &quot;Zombie monster !!&quot;,
    
    &quot;Health&quot;: 2,
    &quot;Speed&quot;: 3,
    &quot;Attack&quot;: 1,

    &quot;Sprite&quot;: &quot;sprites/zombie.png&quot;,
    &quot;Sound&quot;: &quot;sounds/errrrr.mp3&quot;
}
</code></pre>
<h3 id="擴展行為">擴展行為</h3>
<p>雖然有前兩者就能達成模組效果，但修改範圍仍被限制在我們提供的模板中，如果希望玩家能創造更多令人驚豔的內容，就得<h>提供他們自行「擴展」行為與邏輯的手段</h>。但如此程度的擴展就很難不接觸「程式」了，所以了遊戲的核心程式以外，我們也得<h>讀取並運行由玩家編寫的程式碼。 </h></p>
<pre><span>smartZombie.json</span><hr style='margin-top:5px; margin-bottom:0px'>
<code class="language-json.smartZombie">&quot;Define&quot;: 
{
    &quot;name&quot;: &quot;Smart Zombie&quot;,
    &quot;Descripe&quot;: &quot;Zombie monster with AI !!!!&quot;,
    
    // other perperity ...

    &quot;Bevavior&quot;: &quot;scripts/monsterAI.lua&quot;,
}
</code></pre>
<p>假設現在允許玩家編寫怪物移動、攻擊與死亡的行為，我們可以像定義格式那樣「規定」有哪些行為是可以修改的，並在運行時的對應時機使用。</p>
<pre><span>monsterAI.lua</span><hr style='margin-top:5px; margin-bottom:0px'>
<code class="language-lua.monsterAI">function move()
	-- move behavior
end

function attack()
	-- attack behavior
end

function dead()
	-- dead behavior
end
</code></pre>
<p>當然也可以讓玩家自訂行為的觸發時機，讓擴展性再次提升，但無論如何都<h>需要由開發者提供一個載入與調用外部程式的接口，才能運行這些內容。 </h></p>
<p>程式擴展也有許多現成資源可用，例如直譯的 Lua 語言與編譯的 .dll 檔，當然也可以手刻一個虛擬機去跑自製語言&hellip;如果你想的話。</p>
<p>總結以上幾點，排除反編譯等特殊手法以後，遊戲能否允許模組將取決於開發者的意願以及能力。接下來就進入實做環節，提供各位在 Unity 中實現效果的範例參考。</p>
<h2 id="實作範例">實作範例</h2>
<p>範例使用的環境為 Unity，不過邏輯都是通用的，可以自行轉換至適合的環境與工具中。文章會對使用到的關鍵要素進行解釋，但不會過多深入單一工具的用法與原理，請有興趣的人在自行研究。</p>
<ul>
<li>
<p>使用 <a href="https://learn.microsoft.com/zh-tw/dotnet/api/system.io?view=net-7.0" target="_blank">System.IO</a> 讀取 <a href="https://docs.unity3d.com/Manual/StreamingAssets.html" target="_blank">StreamingAssets</a> 達成資料載入</p>
</li>
<li>
<p>使用  <a href="https://learn.microsoft.com/zh-tw/dotnet/api/system.xml?view=net-7.0" target="_blank">System.XML</a> 解析使用 <a href="https://en.wikipedia.org/wiki/XML" target="_blank">XML</a> 儲存的定義檔</p>
</li>
<li>
<p>使用 <a href="https://www.moonsharp.org/" target="_blank">MoonSharp</a> 插件運行 <a href="https://en.wikipedia.org/wiki/Lua_%28programming_language%29" target="_blank">Lua</a> 達成擴展行為</p>
</li>
</ul>
<p>範例使用的美術資源為 <a href="https://0x72.itch.io/dungeontileset-ii" target="_blank">0x72_DungeonTilesetII_v</a></p>
<h3 id="定義實體">定義實體</h3>
<p>首先我們要定義一個遊戲實體，它可以是怪物、道具或場景物件，但這邊先以通用物件做範例，它的屬性有辨識 ID、外觀圖像與要使用的行為腳本。</p>
<p>建立一個類別並宣告對應變數，為了使用 <code>XMLSerializer</code> 解析資料，我們必須給類別和變數添加序列化標籤 <code>[System.Serializable]</code> 與 XML 的元素標籤 <code>[XmlType]</code> <code>[XmlAttribute]</code> <code>[XmlElement]</code>。</p>
<pre><span>cs</span><hr style='margin-top:5px; margin-bottom:0px'>
<code class="language-cs">[System.Serializable][XmlType(&quot;Entity&quot;)]
public class EntityDefine
{
    [XmlAttribute]
    public string id;

    [XmlElement(&quot;Sprite&quot;)]
    public string sprite;

    [XmlElement(&quot;Script&quot;)]
    public string script;
}

</code></pre>
<p>建立定義文件，並根據設計的模板填充實體屬性，完成第一個遊戲實體設計。當然要多放幾個或是改變內容都是允許的，但範例就先保持簡單。</p>
<pre><span>enemies.xml</span><hr style='margin-top:5px; margin-bottom:0px'>
<code class="language-xml.enemies">&lt;Entities&gt;
    &lt;Entity id=&quot;entityID&quot;&gt;
        &lt;Sprite&gt;UseSpriteName.jpg&lt;/Sprite&gt;
        &lt;Script&gt;UseScriptName.lua&lt;/Script&gt;
    &lt;/Entity&gt;
&lt;/Entities&gt;
</code></pre>
<p>接著，我們需要將定義文件讀取進遊戲才能使用。透過 <code>Application.streamingAssetsPath</code> 取得資料夾位置，並用 IO 將文件內容讀取出來，轉換成 Xml 物件以便後續解析。</p>
<pre><span>cs</span><hr style='margin-top:5px; margin-bottom:0px'>
<code class="language-cs">string path = $&quot;{Application.streamingAssetsPath}\\entities.xml&quot;;

byte[] entitiesData = File.ReadAllBytes(path);
string dataText = System.Text.Encoding.UTF8.GetString(entitiesData);

XmlDocument dataXML = new XmlDocument();
dataXML.LoadXml(dataText);
</code></pre>
<p><r>
注意：正反斜線的差異可能會造成影響，建議在訪問路徑前先用 replace 統一。
</r></p>
<p>因為 XML 不像 Json 有 JsonUtility 可以使用，所以我找了一段泛型序列化函式協助，原理我也不清楚，總之有效 :P</p>
<pre><span>cs</span><hr style='margin-top:5px; margin-bottom:0px'>
<code class="language-cs">public static T ConvertNode&lt;T&gt;(XmlNode node) where T : class
{
    MemoryStream stm = new MemoryStream();

    StreamWriter stw = new StreamWriter(stm);
    stw.Write(node.OuterXml);
    stw.Flush();

    stm.Position = 0;

    XmlSerializer ser = new XmlSerializer(typeof(T));
    T result = (ser.Deserialize(stm) as T);

    return result;
}
</code></pre>
<p>最後就是遍歷 XML 子節點，找出文件定義的所有 <code>&lt;Entity&gt;</code> 資料，把內容換成物件儲存。</p>
<pre><span>cs</span><hr style='margin-top:5px; margin-bottom:0px'>
<code class="language-cs">public List&lt;EntityDefine&gt; defines;

XmlNode root = dataXML.DocumentElement;
for (int i = 0; i &lt; root.ChildNodes.Count; i)
{
    XmlNode node = root.ChildNodes[i];
    Debug.Log(node.Name);

    EntityDefine entity = ConvertNode&lt;EntityDefine&gt;(node);
    defines.Add(entity);
}
</code></pre>







<div class="image" style="width: ;" >
    <img src="/learn/game-development/how-to-make-modification-games/example-entities.jpg" alt="image display error, please report: [/learn/game-development/how-to-make-modification-games/example-entities.jpg]">
    <p style="opacity: 0.5">
        
    </p>
</div>


<h3 id="載入資源">載入資源</h3>
<p>現在已經能讀取實體的定義資料了，但實例化前還得找出他要使用的資源才行，也就是實體的圖片與行為腳本。除了定義格式以外，我們也<h>需要「規定」遊戲資源的存放位置，要求玩家遵守某些資源擺放與命名規則</h>，這樣除了能更方便的載入資料，也能有效保持模組檔案整潔。</p>
<p>將圖片放置的位置限定在 StreamingAssets 的 Sprites 資料夾中，並透過 <code>Directory.GetFiles()</code> 取得其下所有檔案的路徑。</p>
<pre><span>cs</span><hr style='margin-top:5px; margin-bottom:0px'>
<code class="language-cs">string folderName = &quot;Sprites&quot;;
string directoryPath = $&quot;{Application.streamingAssetsPath}\\{folderName}&quot;;
string[] files = Directory.GetFiles(directoryPath);
</code></pre>







<div class="image" style="width: ;" >
    <img src="/learn/game-development/how-to-make-modification-games/assets-folder.jpg" alt="image display error, please report: [/learn/game-development/how-to-make-modification-games/assets-folder.jpg]">
    <p style="opacity: 0.5">
        
    </p>
</div>


<p>最後，我們遍歷所有資源的路徑，透過 <code>string.EndsWith()</code> 檢測資料格式正不正確，並用 Unity ImageConversion 將 <code>byte[]</code> 轉換為圖片儲存，以便後續使用。</p>
<pre><span>cs</span><hr style='margin-top:5px; margin-bottom:0px'>
<code class="language-cs">public Dictionary&lt;string, Texture&gt; textures;

for (int i = 0; i &lt; files.Length; i)
{
    string path = files[i];

    if (path.EndsWith(&quot;.png&quot;))
    {
        byte[] data = File.ReadAllBytes(path);

        Texture2D image = new Texture2D(2, 2);
        image.filterMode = FilterMode.Point;
        image.LoadImage(data);

        string name = path.Replace(directoryPath + &quot;\\&quot;, &quot;&quot;);
        textures.Add(name, image);
    }
}
</code></pre>
<p>載入 lua 腳本的方式也相同，尋找資料夾、抓取資料、檢測格式、建立物件並存入資源庫。</p>
<pre><span>cs</span><hr style='margin-top:5px; margin-bottom:0px'>
<code class="language-cs">string directoryPath = $&quot;{Application.streamingAssetsPath}\\Scripts&quot;;
string[] files = Directory.GetFiles(directoryPath);

for (int i = 0; i &lt; files.Length; i)
{
    string path = files[i];
    if (path.EndsWith(&quot;.lua&quot;))
    {
        byte[] data = File.ReadAllBytes(path);
        string code = System.Text.Encoding.UTF8.GetString(data);

        Script script = new Script();
        script.DoString(code);

        string name = path.Replace(directoryPath + &quot;\\&quot;, &quot;&quot;);
        scripts.Add(name, script);
    }
}
</code></pre>
<p>腳本內容視需求而定，這裡先只用一個 awake 函式，代表會在實體初始化時會被調用。</p>
<pre><span>behavior.lua</span><hr style='margin-top:5px; margin-bottom:0px'>
<code class="language-lua.behavior">function awake()
	print(&quot;hello from script a&quot;);
end
</code></pre>
<h3 id="實例物件">實例物件</h3>
<p>現在解析與載入的工作都完成，終於能生成遊戲實體了。建立一個類別，它代表了實體在遊戲場景中的實例化物件，會儲存部份資料並將外在樣貌顯示出來。</p>
<pre><span>cs</span><hr style='margin-top:5px; margin-bottom:0px'>
<code class="language-cs">public class GameEntity : MonoBehaviour
{
    [SerializeField] string id;
    [SerializeField] Sprite sprite;
    public DynValue function;

    public void SetEntity(string id, Sprite sprite, DynValue awakeFunction)
    {
        this.id = id;
        this.sprite = sprite;
        this.function = awakeFunction;
    }
}
</code></pre>
<p>實例化物件時只要根據定義檔的資料，生成並把使用資源傳入進去即可。這裡透過 moonSharp 的 <code>Globals.Get();</code> 找出 awake 函式，並保存進 DynValue 中進行傳遞。</p>
<pre><span>cs</span><hr style='margin-top:5px; margin-bottom:0px'>
<code class="language-cs">void GenerateEntity(EntityDefine define)
{
    GameEntity entity = Instantiate(entityPrefab);

    Texture2D texture = textures[define.sprite];
    Sprite sprite = Sprite.Create(texture, new Rect(0, 0, texture.width, texture.height), new Vector2(0.5f, 0.5f), 16);

    Script script = scripts[define.script];
    DynValue function = script.Globals.Get(&quot;awake&quot;);

    entity.SetEntity(define.id, sprite, function);
}
</code></pre>
<p>最後，讓實體的物件初始化，調用從 lua 腳本中取得的 awake 函式！搭啦～原本只靠文字描述的實體就出在在場景中了，還帶著自己的圖片與行為。</p>
<pre><span>cs</span><hr style='margin-top:5px; margin-bottom:0px'>
<code class="language-cs">public class GameEntity : MonoBehaviour
{
    // codes...

    void Start()
    {
        Initial();
    }
    void Initial()
    {
        gameObject.name = id;
        GetComponent&lt;SpriteRenderer&gt;().sprite = sprite;

        if (function != null)
        {
            function.Function.Call();
        }
    }
}

</code></pre>
<h3 id="難題思考">難題思考</h3>
<p>大功告成！</p>
<p>現在遊戲在建置後仍能從 StreamingAssets 添加與修改遊戲內容，也達成遊戲模組的最基本效果了。</p>







<div class="image" style="width: ;" >
    <img src="/learn/game-development/how-to-make-modification-games/example-result.gif" alt="image display error, please report: [/learn/game-development/how-to-make-modification-games/example-result.gif]">
    <p style="opacity: 0.5">
        
    </p>
</div>


<p><c>
註：建置後的資料夾位置在 Build/Project_Data/StreamingAssets
</c></p>
<p>核心概念其實不複雜，就像上面拆解的而已，但這樣就真能的「應用」在遊戲上嗎？</p>
<p>當然不行，因為範例省略了許多應用層面需要考量的問題，也不可能逐個深入解釋。畢竟本篇筆記的目的只是提供深入研究的起點，所以最後就丟幾個研究時遇到的難題給各位思考吧 :P</p>
<p><strong>層次結構</strong></p>
<p>這裡是指模組資料的存放規則，我們在範例使用的結構很簡單，只有一個文件 (entities.xml) 與兩個資源資料夾 (Sprite, Script) 而已，但實際應用時可能有各種不同類型的資料要存放。</p>
<p>要怎麼規範才符合需求呢？是要根據「用途」分類資源，讓地圖、角色、怪物與道具使用的內容各自存放？還是基於「類型」分類資料，將定義文件、圖片資源與腳本獨立管理？</p>
<p>模組資料夾中的層次結構與命名規範是我們首先要思考的問題。</p>







<div class="image" style="width: 80%;" >
    <img src="/learn/game-development/how-to-make-modification-games/thinking-folder.jpg" alt="image display error, please report: [/learn/game-development/how-to-make-modification-games/thinking-folder.jpg]">
    <p style="opacity: 0.5">
        Noita, One Step from Eden 與 Rimworld 的模組資料夾結構
    </p>
</div>


<p><strong>定義格式</strong></p>
<p>除了大範圍的層次結構，我們也要思考小範圍的資料定義格式，在範例中我們使用 xml 來定義一個實體，雖然裡面只有三項屬性，但實際應用時不會那麼簡單。</p>
<p>我們可能需要儲存大量的文本、參數、行為、邏輯、視覺與聽覺資料，如何設計更好的資料格式，讓定義文件容易閱讀和修改？或是重用資料以避免大量的重複內容？</p>
<p>定義文件的規範與格式也是一個要思考的問題。</p>







<div class="image" style="width: 80%;" >
    <img src="/learn/game-development/how-to-make-modification-games/thinking-define.jpg" alt="image display error, please report: [/learn/game-development/how-to-make-modification-games/thinking-define.jpg]">
    <p style="opacity: 0.5">
        One Step from Eden 中的各種定義檔、角色、動畫與道具
    </p>
</div>


<p><strong>資料衝突</strong></p>
<p>範例中我們透過 ID 作為實體的辨識標籤，雖然自己能避免命名衝突，但情況放到不同的模組創作者之間就不同了。該怎麼隔離不同模組的資料？如果希望不同模組之間能相互引用又該怎麼處裡？</p>
<p>或是更可怕的，不是定義衝突而是運行時的行為與邏輯發生衝突該怎麼辦？</p>
<p>如果社群為你創作了豐富的模組內容，卻因為大量衝突而無法加入遊戲會相當遺憾，所以模組之間的衝突應對也是製作時要考量的一點。</p>
<p><strong>開發工具</strong></p>
<p>「有辦法」開發模組不代表「容易」開發模組，如果想鼓勵玩家創作的話，為他們提供協助是必須的，就像遊戲引擎協助我們開發遊戲一樣。</p>
<p>檔案管理器、資料檢視器、報錯系統與開發者模式等等，分析引擎是怎麼幫助我們製作遊戲的，並開發輔助玩家創作的工具，減低模組開發時會受到的阻礙。</p>







<div class="image" style="width: 80%;" >
    <img src="/learn/game-development/how-to-make-modification-games/thinking-devtool.jpg" alt="image display error, please report: [/learn/game-development/how-to-make-modification-games/thinking-devtool.jpg]">
    <p style="opacity: 0.5">
        Rimworld 的報錯視窗
    </p>
</div>


<p><strong>效能優化</strong></p>
<p>我們製作遊戲時會因為效能考量對使用資源進行限制，但情況放到模組上就沒那麼簡單了，雖然還是能限制資源的規格，但仍無法直接管控模組使用的資源。</p>
<p>如何管理大量資源，提升模組載入與運行效率？避免記憶體被未用資源佔滿，或是運行時的各種 GC 問題導致效能低落？</p>
<p>效能也是一個需要考量的地方，除非你的遊戲像 Rimworld 一樣吸引人，不然玩家不會想花十幾分鐘等模組載入的。</p>
<p><strong>目的為何</strong></p>
<p>最後也是最重要的問題：你究竟想做什麼</p>
<p>讓遊戲支援模組開發的目的為何？是希望玩家能分享創作，促進社群交流？還是想讓他們給遊戲添加更多道具、角色，提升內容豐富度？又或者你想打造一個像 Rimworld 與 Minecraft 這種趨近瘋狂，能對整個遊戲機制進行修改沙盒世界？</p>
<p>無論如何最後都得回到需求上，實做前必須謹慎思考你的目標，並評估你願意付出多少成本完成這項偉大工作。</p>
<h2 id="感謝閱讀">感謝閱讀</h2>
<p>雖然這篇筆記的重點是模組開發，但當中的知識不會被用法侷限，即使不讓玩家改動內容，資料驅動也是相當重要的開發技能，它除了讓企劃人員能更方便的改動設計，也是發布後擴充 DLC 與進行熱更新的好方法。</p>
<p>幾個月前就該完成的筆記，拖到現在不好意思了，入學讀書真的是很花時間的事。總之，希望這次的內容也能讓各位有所啟發，感謝閱讀 :D</p>








<p>
    <a href="https://github.com/angus945/angusChan-website-projectsource/tree/main/learn/game-development/how-to-make-modification-games/example" target="_blank">
        &gt; 範例中的完整腳本，與範例的模組資料都在這 &lt;
    </a>
</p>



<iframe class="LikeCoin" height="190" src="https://button.like.co/in/embed/chanangus/button?referrer=https%3a%2f%2fangus945.github.io%2flearn%2fgame-development%2fhow-to-make-modification-games%2f" width="100%" frameborder=0></iframe>

<h3 id="學習資料">學習資料</h3>
<p><a href="http://gameprogrammingpatterns.com/prototype.html" target="_blank">Game Programming Patterns - Prototype</a></p>
<p><a href="http://gameprogrammingpatterns.com/type-object.html" target="_blank">Game Programming Patterns - Type Object</a></p>
<p><a href="http://gameprogrammingpatterns.com/bytecode.html" target="_blank">Game Programming Patterns - Bytecode</a></p>
<p><a href="https://ecampusontario.pressbooks.pub/gamedesigndevelopmenttextbook/chapter/game-modifications-player-communities/" target="_blank">Open Library - Game modifications</a></p>
<p><a href="https://www.techopedia.com/definition/3841/modification-mod" target="_blank">Techopedia - Modification</a></p>
<p><a href="https://www.turiyaware.com/blog/creating-a-moddable-unity-game" target="_blank">Turiyaware - Creating A Moddable Unity Game</a></p>
<p><a href="https://docs.unity3d.com/Manual/StreamingAssets.html" target="_blank">Unity Manual - Streaming Assets</a></p>
<p><a href="https://docs.unity3d.com/ScriptReference/ImageConversion.html" target="_blank">Unity Manual - ImageConversion</a></p>
<p><a href="https://learn.microsoft.com/zh-tw/dotnet/api/system.xml.serialization.xmlattributes.xmltype?view=net-7.0" target="_blank">Microsoft Docs - XmlType</a></p>
<p><a href="https://learn.microsoft.com/zh-tw/dotnet/api/system.xml.xmlelement?view=net-7.0" target="_blank">Microsoft Docs - XmlElement</a></p>
<p><a href="https://learn.microsoft.com/zh-tw/dotnet/api/system.xml.serialization.xmlattributes.xmlattribute?view=net-7.0" target="_blank">Microsoft Docs - XmlAttribute</a></p>
<p><a href="https://learn.microsoft.com/zh-tw/dotnet/standard/base-types/regular-expressions" target="_blank">Microsoft Docs - .Net Regular Expressions</a></p>
<p><a href="https://www.moonsharp.org/getting_started.html" target="_blank">MoonSharp - Getting Started</a></p>

        
        
    </div>
</article>




                
  
  
  

  <hr>
  <section class="social-share">
    <ul class="share-icons">
      <li>
        <img src="https://img.icons8.com/ios-glyphs/30/null/share--v1.png" width="35" height="35"/>
      </li>
      
      <li>
        <a href="https://twitter.com/intent/tweet?&amp;url=https%3a%2f%2fangus945.github.io%2flearn%2fgame-development%2fhow-to-make-modification-games%2f&amp;text=%e3%80%90%e7%ad%86%e8%a8%98%e3%80%91%e5%a6%82%e4%bd%95%e8%ae%93%e9%81%8a%e6%88%b2%e6%94%af%e6%8f%b4%e6%a8%a1%e7%b5%84%e9%96%8b%e7%99%bc" target="_blank" rel="noopener" aria-label="Share on Twitter" class="share-btn twitter">
          
<img src="https://img.icons8.com/color/48/null/twitter--v1.png" width="35" height="35"/>
          <p>Twitter</p>
        </a>
      </li>

      
      <li>
        <a href="https://www.facebook.com/sharer.php?u=https%3a%2f%2fangus945.github.io%2flearn%2fgame-development%2fhow-to-make-modification-games%2f" target="_blank" rel="noopener" aria-label="Share on Facebook" class="share-btn facebook">
          <img src="https://img.icons8.com/fluency/48/null/facebook-new.png" width="35" height="35"/>
          <p>Facebook</p>
          </a>
      </li>

      
      <li>
        <a href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3a%2f%2fangus945.github.io%2flearn%2fgame-development%2fhow-to-make-modification-games%2f&amp;source=https%3a%2f%2fangus945.github.io%2flearn%2fgame-development%2fhow-to-make-modification-games%2f&amp;title=%e3%80%90%e7%ad%86%e8%a8%98%e3%80%91%e5%a6%82%e4%bd%95%e8%ae%93%e9%81%8a%e6%88%b2%e6%94%af%e6%8f%b4%e6%a8%a1%e7%b5%84%e9%96%8b%e7%99%bc&amp;summary=%e3%80%90%e7%ad%86%e8%a8%98%e3%80%91%e5%a6%82%e4%bd%95%e8%ae%93%e9%81%8a%e6%88%b2%e6%94%af%e6%8f%b4%e6%a8%a1%e7%b5%84%e9%96%8b%e7%99%bc" target="_blank" rel="noopener" aria-label="Share on LinkedIn" class="share-btn linkedin">
          <img src="https://img.icons8.com/color/48/null/linkedin-circled--v1.png" width="35" height="35"/>
            <p>LinkedIn</p>
          </a>
      </li>

      
      

      
      <li>
        <a href="mailto:?subject=AngusChan%27s%20Devlog - %e3%80%90%e7%ad%86%e8%a8%98%e3%80%91%e5%a6%82%e4%bd%95%e8%ae%93%e9%81%8a%e6%88%b2%e6%94%af%e6%8f%b4%e6%a8%a1%e7%b5%84%e9%96%8b%e7%99%bc.&amp;body=%e3%80%90%e7%ad%86%e8%a8%98%e3%80%91%e5%a6%82%e4%bd%95%e8%ae%93%e9%81%8a%e6%88%b2%e6%94%af%e6%8f%b4%e6%a8%a1%e7%b5%84%e9%96%8b%e7%99%bc%2c%20by%20AngusChan%27s%20Devlog%0a%e9%80%99%e6%ac%a1%e5%b0%87%e8%a7%a3%e9%87%8b%e9%81%8a%e6%88%b2%e6%a8%a1%e7%b5%84%e7%9a%84%e9%81%8b%e4%bd%9c%e5%8e%9f%e7%90%86%ef%bc%8c%e4%bb%a5%e5%8f%8a%e5%a6%82%e4%bd%95%e5%9c%a8%20Unity%20%e4%b8%ad%e4%bd%bf%e7%94%a8%20IO%e3%80%81XML%20%e8%88%87%20Lua%20%e9%80%b2%e8%a1%8c%e5%af%a6%e5%81%9a%e3%80%82%0a%0ahttps%3a%2f%2fangus945.github.io%2flearn%2fgame-development%2fhow-to-make-modification-games%2f%0a" target="_blank" class="share-btn email">
          <img src="https://img.icons8.com/color/48/null/gmail--v1.png" width="35" height="35"/>
          <p>Email</p>
        </a>
      </li>
    </ul>
  </section>


                

        

        
                
        

        <hr>
        <script src="https://giscus.app/client.js"
                data-repo="angus945/angusChan-website-comment"
                data-repo-id="R_kgDOJfatog"
                data-category="Announcements"
                data-category-id="DIC_kwDOJfatos4CWS6f"
                data-mapping="title"
                data-strict="0"
                data-reactions-enabled="1"
                data-emit-metadata="0"
                data-input-position="bottom"
                data-theme="preferred_color_scheme"
                data-lang="zh-TW"
                data-loading="lazy"
                crossorigin="anonymous"
                async>
        </script>



                

<div class="license markdown-body">
    <blockquote>
        <p>
            尊重著作權，轉載規則請見  
            <a rel="license" href="https://angus945.github.io/about/" target="_blank">About</a>
             。
        </p>
    </blockquote>
</div>


            </div>
            <aside class="col-12 col-md-3 float-left sidebar">
    
    <div class="sidebar-item sidebar-pages">
        <h3>頁面</h3>
        <ul>

            
            <li>
                <a href="/">Home</a>
            </li>
            
            <li>
                <a href="/all/">All</a>
            </li>
            
            <li>
                <a href="/devlog/">Devlog</a>
            </li>
            
            <li>
                <a href="/learn/">Learn</a>
            </li>
            
            <li>
                <a href="/article/">Article</a>
            </li>
            
            <li>
                <a href="/about">About</a>
            </li>
            
        </ul>
    </div>
    
    <div class="sidebar-item sidebar-links">
        <h3>連結</h3>
        <ul>
            
            <li>
                <a href="https://github.com/angus945/" target="_blank"><span>GitHub</span></a>
            </li>
            
            <li>
                <a href="https://www.facebook.com/angucChan" target="_blank"><span>Facebook</span></a>
            </li>
            
            <li>
                <a href="https://twitter.com/angus9456" target="_blank"><span>Twitter</span></a>
            </li>
            
            <li>
                <a href="https://home.gamer.com.tw/homeindex.php?owner=angus945" target="_blank"><span>Bahamut</span></a>
            </li>
            
        </ul>
    </div>
    
    <div class="sidebar-item sidebar-tags">
        <h3>標籤</h3>
        <div>
            
            <span>
                <a href="/tags/compute-shader/">compute-shader</a>
            </span>
            
            <span>
                <a href="/tags/custom-editor/">custom-editor</a>
            </span>
            
            <span>
                <a href="/tags/data-driven/">data-driven</a>
            </span>
            
            <span>
                <a href="/tags/devlog/">devlog</a>
            </span>
            
            <span>
                <a href="/tags/game-develop/">game-develop</a>
            </span>
            
            <span>
                <a href="/tags/hugo/">hugo</a>
            </span>
            
            <span>
                <a href="/tags/learning/">learning</a>
            </span>
            
            <span>
                <a href="/tags/modification/">modification</a>
            </span>
            
            <span>
                <a href="/tags/post-processing/">post-processing</a>
            </span>
            
            <span>
                <a href="/tags/procedure-generation/">procedure-generation</a>
            </span>
            
            <span>
                <a href="/tags/programming/">programming</a>
            </span>
            
            <span>
                <a href="/tags/resources/">resources</a>
            </span>
            
            <span>
                <a href="/tags/scene-design/">scene-design</a>
            </span>
            
            <span>
                <a href="/tags/shader/">shader</a>
            </span>
            
            <span>
                <a href="/tags/test/">test</a>
            </span>
            
            <span>
                <a href="/tags/trip/">trip</a>
            </span>
            
            <span>
                <a href="/tags/unity/">unity</a>
            </span>
            
            <span>
                <a href="/tags/website/">website</a>
            </span>
            
        </div>
    </div>
    <div class="sidebar-item sidebar-toc">
        <h3>目錄</h3><nav id="TableOfContents">
  <ul>
    <li><a href="#資料驅動">資料驅動</a>
      <ul>
        <li><a href="#資料讀取">資料讀取</a></li>
        <li><a href="#格式定義">格式定義</a></li>
        <li><a href="#擴展行為">擴展行為</a></li>
      </ul>
    </li>
    <li><a href="#實作範例">實作範例</a>
      <ul>
        <li><a href="#定義實體">定義實體</a></li>
        <li><a href="#載入資源">載入資源</a></li>
        <li><a href="#實例物件">實例物件</a></li>
        <li><a href="#難題思考">難題思考</a></li>
      </ul>
    </li>
    <li><a href="#感謝閱讀">感謝閱讀</a>
      <ul>
        <li><a href="#學習資料">學習資料</a></li>
      </ul>
    </li>
  </ul>
</nav></div>
</aside>

        </div>
        
<div class="btn">
    <div class="btn-menu" id="btn-menu">
        <i class="iconfont icon-grid-sharp"></i>
    </div>
    <div class="btn-toggle-mode">
        <i class="iconfont icon-contrast-sharp"></i>
    </div>
    <div class="btn-scroll-top">
        <i class="iconfont icon-chevron-up-circle-sharp"></i>
    </div>
</div>
<aside class="sidebar-mobile" style="display: none;">
  <div class="sidebar-wrapper">
    
    <div class="sidebar-item sidebar-pages">
        <h3>頁面</h3>
        <ul>
            
            <li>
                <a href="/">Home</a>
            </li>
            
            <li>
                <a href="/all/">All</a>
            </li>
            
            <li>
                <a href="/devlog/">Devlog</a>
            </li>
            
            <li>
                <a href="/learn/">Learn</a>
            </li>
            
            <li>
                <a href="/article/">Article</a>
            </li>
            
            <li>
                <a href="/about">About</a>
            </li>
            
        </ul>
    </div>
    
    <div class="sidebar-item sidebar-links">
        <h3>連結</h3>
        <ul>
            
            <li>
                <a href="https://github.com/angus945/" target="_blank"><span>GitHub</span></a>
            </li>
            
            <li>
                <a href="https://www.facebook.com/angucChan" target="_blank"><span>Facebook</span></a>
            </li>
            
            <li>
                <a href="https://twitter.com/angus9456" target="_blank"><span>Twitter</span></a>
            </li>
            
            <li>
                <a href="https://home.gamer.com.tw/homeindex.php?owner=angus945" target="_blank"><span>Bahamut</span></a>
            </li>
            
        </ul>
    </div>
    
    <div class="sidebar-item sidebar-tags">
        <h3>標籤</h3>
        <div>
            
            <span>
                
            </span>
            
            <span>
                
            </span>
            
            <span>
                
            </span>
            
            <span>
                
            </span>
            
            <span>
                
            </span>
            
            <span>
                
            </span>
            
            <span>
                
            </span>
            
            <span>
                
            </span>
            
            <span>
                
            </span>
            
            <span>
                
            </span>
            
            <span>
                
            </span>
            
            <span>
                
            </span>
            
            <span>
                
            </span>
            
            <span>
                
            </span>
            
            <span>
                
            </span>
            
            <span>
                
            </span>
            
            <span>
                
            </span>
            
            <span>
                
            </span>
            
        </div>
    </div>
    
    
  </div>
</aside>
    </main>

    <footer>
    <div class="container-lg clearfix">
        <div class="col-12 footer">
            
            <span>&copy; 2021-2024
                <a href="https://angus945.github.io/">AngusChan</a>
                 | <a href="https://github.com/angus945/angusChan-website-projectsource">Source code</a> 
                | 網站使用 <a href="https://github.com/dsrkafuu/hugo-theme-fuji/"
                   target="_blank">Fuji-v2</a> &amp; <a href="https://gohugo.io/"
                                                    target="_blank">Hugo</a> 構建而成
            </span>
        </div>
    </div>
</footer>

    
<script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.0.6/dist/medium-zoom.min.js"></script>
<script defer src="https://cdn.jsdelivr.net/npm/lazysizes@5.3.2/lazysizes.min.js"></script>
<script defer src="https://cdn.jsdelivr.net/npm/prismjs@1.23.0/components/prism-core.min.js"></script>
<script defer src="https://cdn.jsdelivr.net/npm/prismjs@1.23.0/plugins/autoloader/prism-autoloader.min.js"></script>



<script defer src="/assets/js/fuji.min.js"></script>



</body>

</html>
